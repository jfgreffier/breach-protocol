(this["webpackJsonpbreach-protocol"]=this["webpackJsonpbreach-protocol"]||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),c=n.n(i),o=n(20),a=n.n(o),u=n(3),l=n(4),s=n(11),h=n(26),f=n(5);function d(){var e=Object(u.a)(["\n  position: relative;\n  display: inline-block;\n  width: 45px;\n  padding: 2px;\n  text-transform: uppercase;\n  text-align: center;\n  font-size: 3rem;\n  color: ",";\n  ","\n  background-color: ",";\n\n  &:after {\n    ","\n  }\n"]);return d=function(){return e},e}var b=l.a.span(d(),(function(e){return e.color}),(function(e){return e.correct&&"color: blue;"}),(function(e){return e.backgroundColor}),(function(e){return e.highlighted&&"\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border: 5px double var(--active-color);\n    box-shadow: 0px 0px 40px 2px #0ff;\n  "})),j=Object(f.a)((function(e){e.children;var t=e.disabled,n=e.active,c=e.focused,o=e.completed,a=e.onClick,u=e.symbol,l=e.scramble,f=e.correct,d=Object(h.a)(e,["children","disabled","active","focused","completed","onClick","symbol","scramble","correct"]),j=Object(i.useCallback)((function(){return t?"var(--disabled-color-dark)":"var(--primary-color)"}),[t]),v=Object(i.useCallback)((function(){return o?"var(--success-color)":n?"var(--active-background-color)":"initial"}),[o,n,c]);return Object(r.jsx)(b,Object(s.a)(Object(s.a)({color:j,backgroundColor:v,isDisabled:t,onClick:t||!n?null:a,correct:f},d),{},{children:l||(t?"[ ]":u)}))})),v=n(9),g=n.n(v);function m(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: ",";\n  flex-wrap: ",";\n  justify-content: ",";\n  align-items: ",";\n\n  & > *:not(:last-child) {\n    margin-bottom: ",";\n    margin-right: ",";\n  }\n"]);return m=function(){return e},e}var x=l.a.div(m(),(function(e){return e.direction}),(function(e){return e.wrap}),(function(e){return e.justify}),(function(e){return e.align}),(function(e){return"".concat(e.spacing,"rem")}),(function(e){return"".concat(e.spacing,"rem")}));x.propTypes={direction:g.a.string,wrap:g.a.string,justify:g.a.string,align:g.a.string,spacing:g.a.number},x.defaultProps={direction:"row",wrap:"nowrap",justify:"flex-start",align:"flex-start",spacing:0};var p=x,O=n(6),y=n(7),k=n(27),C=n(24),w=function(e){Object(k.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(O.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(y.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("componentDidCatch : ",e,t)}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log("error :",e),{hasError:!0}}}]),n}(i.Component),_=n(2),S=Object.freeze({created:"CREATED",started:"STARTED",finished:"FINISHED"}),E=Object.freeze({row:"ROW",column:"COLUMN"}),M=function(){function e(t,n,r){if(Object(O.a)(this,e),!t.isEmpty())throw Error("Buffer must be empty");if(this.buffer=t,0===n.length)throw Error("At least one sequence must be provided");this.sequences=n,this.matrix=r,this.selectedIndex=0,this.history=[],Object(_.k)(this)}return Object(y.a)(e,[{key:"create",value:function(){this.state=S.created}},{key:"select",value:function(e,t){if(this.history.includes("".concat(e,":").concat(t)))throw Error("Cannot select an already visited cell");if(this.selectionMode===E.row&&e!==this.selectedIndex)throw Error("Selected row must be ".concat(this.selectedIndex));if(this.selectionMode===E.column&&t!==this.selectedIndex)throw Error("Selected column must be ".concat(this.selectedIndex));var n=this.matrix[e][t];return this.selectedIndex=this.selectionMode===E.row?t:e,this.buffer.addEntry(n),this.history.push("".concat(e,":").concat(t)),n}},{key:"state",get:function(){return this.buffer.isFull()?S.finished:this.state}},{key:"selectionMode",get:function(){return this.buffer.position%2===0?E.row:E.column}}]),e}(),q=n(8),I=n(18),D=n.n(I),F=c.a.createContext(),A=function(e){var t=e.children,n=Object(i.useState)(null),c=Object(q.a)(n,2),o=c[0],a=c[1];return Object(r.jsx)(F.Provider,{value:{highlightedSymbol:o,setHighlightedSymbol:a},children:t})},H=F;function T(){var e=Object(u.a)(["\n  background-color: var(--primary-color);\n"]);return T=function(){return e},e}function L(){var e=Object(u.a)(["\n  border: 1px solid var(--primary-color);\n"]);return L=function(){return e},e}var P=l.a.div(L()),R=l.a.div(T());function W(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<2;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var z=Object(f.a)((function(e){var t=e.matrix,n=e.selectedIndex,c=e.selectionMode,o=e.onCellClick,a=e.history,u=Object(i.useState)(null),l=Object(q.a)(u,2),s=l[0],h=l[1],f=Object(i.useContext)(H).highlightedSymbol,d=Object(i.useState)(null),b=Object(q.a)(d,2),v=b[0],g=b[1];Object(i.useEffect)((function(){var e=0,t=setInterval((function(){g(e),10===++e&&(clearInterval(t),g(null))}),40)}),[]);var m=Object(i.useCallback)((function(e,t){return function(){o(e,t)}}),[o]),x=Object(i.useCallback)((function(e,t){return function(){h({x:e,y:t})}}),[]),p=Object(i.useCallback)((function(){h(null)}),[]),O=Object(i.useCallback)((function(e,t){return c===E.row&&n===e||c===E.column&&n===t}),[n,c]),y=Object(i.useCallback)((function(e,t){if(s){if(c===E.column&&e===s.x&&t!==s.y)return!0;if(c===E.row&&e!==s.x&&t===s.y)return!0;if(e===s.x&&t===s.y)return!0}return!1}),[s,c]),k=Object(i.useCallback)((function(e,t,r){return e===f||s&&c===E.row&&n===t&&s.y===r||s&&c===E.column&&n===r&&s.x===t}),[s,f,n,c]);return Object(r.jsxs)(P,{onMouseLeave:p,children:[Object(r.jsx)(R,{colSpan:t.length,children:"CODE MATRIX"}),t.map((function(e,t){return Object(r.jsx)("div",{children:e.map((function(e,n){return Object(r.jsx)(j,{onClick:m(t,n),onMouseEnter:x(t,n),disabled:a.includes("".concat(t,":").concat(n)),active:O(t,n),focused:y(t,n),highlighted:k(e,t,n),symbol:e,scramble:v?W():null},D.a.generate())}))},D.a.generate())}))]})})),B=n(25);function J(){var e=Object(u.a)(["\n  min-height: 52px;\n  min-width: ",";\n  border: 1px solid var(--primary-color);\n"]);return J=function(){return e},e}var N=l.a.aside(J(),(function(e){return"calc(45px * ".concat(e.size,")")})),K=Object(f.a)((function(e){var t=e.capacity,n=e.values;return Object(r.jsx)(N,{size:t,children:Object(B.a)(Array(t)).map((function(e,t){return t>=n.length?Object(r.jsx)(j,{symbol:""},t):Object(r.jsx)(j,{symbol:n[t]||null},t)}))})}));function U(){var e=Object(u.a)(["\n  min-height: 52px;\n  min-width: ",";\n  background-color: ",";\n"]);return U=function(){return e},e}var X=l.a.aside(U(),(function(e){return"calc(45px * ".concat(e.size,")")}),(function(e){return"".concat(e.color)})),G=Object(f.a)((function(e){var t=e.sequence,n=e.buffer,c=Object(i.useState)(null),o=Object(q.a)(c,2),a=o[0],u=o[1],l=Object(i.useContext)(H).setHighlightedSymbol,s=0,h="black";return n.containsSequence(t)?h="green":n.canContainSequence(t)?s=function(e,t){for(var n=t.length-1;n>0;n--)if(e.values.length>=n&&e.values.slice(e.values.length-n,e.values.length).toString()===t.slice(0,n).toString())return n;return-1}(n,t):h="red",Object(r.jsx)(X,{color:h,children:t.map((function(e,n){return Object(r.jsx)(j,{onMouseEnter:function(){l(e),u(n)},onMouseLeave:function(){l(null),u(null)},symbol:t[n],correct:s>n,highlighted:a===n},n)}))})}));function Q(){var e=Object(u.a)(["\n  border: 1px solid var(--primary-color);\n"]);return Q=function(){return e},e}var V=l.a.div(Q()),Y=Object(f.a)((function(e){var t=e.game;return Object(r.jsx)(A,{children:Object(r.jsxs)(p,{direction:"column",spacing:1,children:[Object(r.jsx)(z,{matrix:t.matrix,selectedIndex:t.selectedIndex,selectionMode:t.selectionMode,history:t.history,onCellClick:function(e,n){t.select(e,n)}}),Object(r.jsxs)(p,{direction:"column",spacing:1,children:[Object(r.jsx)(K,Object(s.a)({},t.buffer)),Object(r.jsx)(V,{children:Object(r.jsx)(p,{direction:"column",children:t.sequences.map((function(e,n){return Object(r.jsx)(G,{sequence:e,buffer:t.buffer},n)}))})})]})]})})})),Z=function(){function e(t){Object(O.a)(this,e),this.capacity=t,this.values=[],Object(_.k)(this)}return Object(y.a)(e,[{key:"isEmpty",value:function(){return 0===this.values.length}},{key:"isFull",value:function(){return this.values.length===this.capacity}},{key:"addEntry",value:function(e){if(this.isFull())throw Error("Buffer is full");this.values.push(e)}},{key:"containsSequence",value:function(e){return this.values.join("").includes(e.join(""))}},{key:"canContainSequence",value:function(e){var t=this.capacity-this.values.length;if(t<e.length){for(var n=1;n<=t;n++){var r=e.slice(0,e.length-n).toString();if(this.values.toString().endsWith(r))return!0}return!1}return!0}},{key:"position",get:function(){return this.values.length}}]),e}(),$=["55","1C","E7","BD","F9","K3","L1"];function ee(){return $[te(0,$.length)]}function te(e,t){return Math.floor(Math.random()*(t-e))+e}function ne(e,t){var n=te(0,e.length-t+1);return e.slice(n,n+t)}var re=function(){function e(t,n,r){Object(O.a)(this,e),this._sequence=Array.from({length:t},(function(e){return ee()})),this._matrixHeight=n,this._matrixWidth=r,this._sequences=[ne(this._sequence,2),ne(this._sequence,3),ne(this._sequence,4)],this._matrix=this._createMatrix()}return Object(y.a)(e,[{key:"generate",value:function(){this._fillCriticalPath(),this._fillMatrix()}},{key:"getMatrix",value:function(){return this._matrix}},{key:"getSequences",value:function(){return this._sequences}},{key:"_createMatrix",value:function(){var e=this;return Array.from({length:this._matrixHeight},(function(t){return Array.from({length:e._matrixWidth},(function(e){return null}))}))}},{key:"_fillCriticalPath",value:function(){for(var e=[0,0],t=!0,n=0;n<this._sequence.length;n++)e=this._getRandomEmptyCellInMatrix(e,t),this._matrix[e[0]][e[1]]=this._sequence[n],t=!t}},{key:"_getRandomEmptyCellInMatrix",value:function(e,t){var n=e;if(t)for(;null!=this._matrix[n[0]][n[1]];)n=[e[0],te(0,this._matrixWidth)];else for(;null!=this._matrix[n[0]][n[1]];)n=[te(0,this._matrixHeight),e[1]];return n}},{key:"_fillMatrix",value:function(){for(var e=0;e<this._matrixHeight;e++)for(var t=0;t<this._matrixWidth;t++)null==this._matrix[e][t]&&(this._matrix[e][t]=ee())}}]),e}();function ie(){var e=Object(u.a)(["\n  border: 1px solid var(--primary-color);\n  height: 100%;\n  padding: 4%;\n"]);return ie=function(){return e},e}var ce=l.a.main(ie());var oe=function(){var e=new Z(6),t=new re(6,5,5);t.generate();var n=t.getSequences(),i=t.getMatrix(),c=new M(e,n,i);return Object(r.jsx)(w,{children:Object(r.jsx)(ce,{children:Object(r.jsx)(Y,{game:c})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))};n(46);a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(oe,{})}),document.getElementById("root")),ae()}},[[47,1,2]]]);
//# sourceMappingURL=main.248d168b.chunk.js.map